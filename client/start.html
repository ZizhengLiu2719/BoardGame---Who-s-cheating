<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Who's Cheating? ‚Äì Game Room</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0; padding: 0;
      font-family: 'Segoe Print', 'Comic Sans MS', Arial, cursive;
      background: linear-gradient(120deg, #23202a 0%, #2d1c0b 30%, #22304a 80%, #1a2233 100%);
      color: #5a4327;
      min-height: 100vh;
      transition: background 0.7s;
    }
    body.day-mode {
      background: linear-gradient(120deg, #fffbe7 0%, #ffe7b2 40%, #ffdca8 80%, #ffe2c3 100%);
      color: #a07c4f;
    }
    .container {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-start;
      min-height: 100vh;
      width: 100vw;
      box-sizing: border-box;
      padding: 32px 0 32px 0;
    }
    .left-panel, .right-panel {
      width: 320px;
      min-width: 260px;
      max-width: 400px;
      margin: 0 24px;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }
    .center-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-width: 400px;
      max-width: 900px;
    }
    .title-badge {
      font-size: 2.1rem;
      font-family: 'Caveat', 'Segoe Print', cursive;
      font-weight: bold;
      background: linear-gradient(120deg,#23202a 60%,#6b5a3a 100%);
      color: #e2c391;
      border-radius: 22px 18px 32px 18px/18px 32px 18px 32px;
      border: 2.5px solid #7bb0e6;
      box-shadow: 0 4px 18px 0 #23202a55, 0 2px 0 #fffbe7 inset;
      padding: 18px 38px 14px 38px;
      margin-bottom: 18px;
      text-align: center;
      letter-spacing: 1.5px;
      min-width: 180px;
      transition: all 0.3s;
    }
    body.day-mode .title-badge {
      background: linear-gradient(120deg,#fffbe7 60%,#ffe7b2 100%);
      color: #e2a84f;
      border: 2.5px solid #ffdca8;
    }
    .score-box, .love-hate-box {
      background: #fffbe7ee;
      border-radius: 18px;
      box-shadow: 0 2px 18px 0 #23202a22,0 2px 0 #fffbe7 inset;
      border: 2px solid #7bb0e6;
      padding: 18px 18px 14px 18px;
      font-size: 1.08rem;
      color: #7a5a2f;
      margin-bottom: 12px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    body.day-mode .score-box, body.day-mode .love-hate-box {
      background: #fffbe7;
      color: #a07c4f;
      border: 2px solid #ffdca8;
    }
    .score-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .score-label {
      flex: 1;
      font-weight: bold;
      font-size: 1.08em;
    }
    .score-controls {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .score-btn {
      width: 32px; height: 32px;
      border-radius: 8px;
      border: 2px solid #e2c391;
      background: #ffe7b2;
      color: #7a5a2f;
      font-size: 1.2em;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .score-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .score-value {
      width: 32px;
      text-align: center;
      font-size: 1.15em;
      font-weight: bold;
      color: #bfa16a;
    }
    .action-btn, .reset-btn, .vote-btn {
      width: 100%;
      margin-top: 8px;
      padding: 10px 0;
      border-radius: 12px;
      border: 2px solid #e2c391;
      background: #ffe7b2;
      color: #7a5a2f;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .action-btn:disabled, .reset-btn:disabled, .vote-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .love-hate-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }
    .love-hate-label {
      flex: 1;
      font-weight: bold;
      font-size: 1.08em;
    }
    .love-hate-value {
      width: 32px;
      text-align: center;
      font-size: 1.15em;
      font-weight: bold;
      color: #e26a6a;
    }
    .hate-value {
      color: #7a5a2f;
    }
    .circle-table-container {
      position: relative;
      width: 480px;
      height: 480px;
      margin: 0 auto 24px auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .circle-table {
      width: 380px;
      height: 380px;
      border-radius: 50%;
      background: radial-gradient(circle at 60% 40%, #6b5a3a 55%, #2d1c0b 100%);
      border: 8px solid #bfa16a;
      box-shadow: 0 12px 48px 0 #23202a, 0 0 0 24px #23202a33 inset, 0 0 0 8px #7bb0e633 inset;
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
    }
    body.day-mode .circle-table {
      background: radial-gradient(circle at 60% 40%, #fffbe7 60%, #ffe7b2 100%);
      box-shadow: 0 16px 64px 0 #ffdca888, 0 0 0 24px #fffbe7cc inset, 0 0 0 8px #ffe7b2cc inset;
    }
    .role-cards-circle {
      position: absolute;
      left: 50%; top: 50%;
      width: 480px; height: 480px;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 2;
    }
    .role-card {
      position: absolute;
      width: 80px; height: 120px;
      border-radius: 16px;
      box-shadow: 0 6px 24px 0 rgba(90, 67, 39, 0.13);
      border: 3px solid #e2c391;
      background: #fffbe7;
      object-fit: cover;
      pointer-events: auto;
      transition: transform 0.2s, box-shadow 0.2s;
      user-select: none;
    }
    .role-card.me {
      box-shadow: 0 0 0 6px #bfa16a99, 0 6px 24px 0 rgba(90, 67, 39, 0.13);
      border: 3.5px solid #7a5a2f;
      z-index: 10;
    }
    .player-name-label {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.02rem;
      color: #e2c391;
      background: rgba(40,30,20,0.72);
      border-radius: 8px;
      border: 1.5px solid #7bb0e6;
      padding: 4px 14px;
      white-space: nowrap;
      box-shadow: 0 2px 8px 0 #7bb0e644, 0 0 8px 0 #23202a99;
      pointer-events: none;
      font-family: 'Caveat', 'Segoe Print', 'Comic Sans MS', cursive;
      font-style: italic;
      font-weight: 500;
    }
    @media (max-width: 1200px) {
      .container { flex-direction: column; align-items: center; }
      .left-panel, .right-panel { width: 90vw; max-width: 98vw; margin: 0 0 24px 0; }
      .center-panel { min-width: 320px; }
      .circle-table-container, .role-cards-circle { width: 98vw; height: 98vw; min-width: 200px; min-height: 200px; }
      .circle-table { width: 60vw; height: 60vw; min-width: 200px; min-height: 200px; }
    }
  </style>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <div class="container">
    <!-- Left Panel: Scores and Actions -->
    <div class="left-panel">
      <div class="title-badge" id="gameTitleBadge">Who's Cheating?</div>
      <div class="score-box">
        <div class="score-row">
          <span class="score-label">Party Count</span>
          <span class="score-controls">
            <button class="score-btn host-only" id="partyMinusBtn">-1</button>
            <span class="score-value" id="partyCount">0</span>
            <button class="score-btn host-only" id="partyPlusBtn">+1</button>
          </span>
        </div>
        <div class="score-row">
          <span class="score-label">Scandal Score</span>
          <span class="score-controls">
            <button class="score-btn host-only" id="scandalMinusBtn">-1</button>
            <span class="score-value" id="scandalScore">0</span>
            <button class="score-btn host-only" id="scandalPlusBtn">+1</button>
          </span>
        </div>
        <div class="score-row">
          <span class="score-label">Close-Knot Score</span>
          <span class="score-controls">
            <button class="score-btn host-only" id="closeKnotMinusBtn">-1</button>
            <span class="score-value" id="closeKnotScore">0</span>
            <button class="score-btn host-only" id="closeKnotPlusBtn">+1</button>
          </span>
        </div>
        <div class="score-row">
          <span class="score-label">Vote Count</span>
          <span class="score-controls">
            <button class="score-btn host-only" id="voteMinusBtn">-1</button>
            <span class="score-value" id="voteCount">0</span>
            <button class="score-btn host-only" id="votePlusBtn">+1</button>
          </span>
        </div>
      </div>
      <div class="love-hate-box">
        <div class="love-hate-row">
          <span class="love-hate-label">Love Count</span>
          <span class="love-hate-value" id="loveCount">0</span>
        </div>
        <div class="love-hate-row">
          <span class="love-hate-label">Hate Count</span>
          <span class="love-hate-value hate-value" id="hateCount">0</span>
        </div>
        <button class="action-btn host-only" id="takeActionBtn">Take Action</button>
        <button class="reset-btn host-only" id="resetLoveHateBtn">Reset Count</button>
        <button class="reset-btn host-only" id="resetVoteBtn">Reset Vote</button>
      </div>
    </div>
    <!-- Center Panel: Table and Cards -->
    <div class="center-panel">
      <div class="circle-table-container">
        <div class="circle-table"></div>
        <div class="role-cards-circle" id="roleCardsCircle"></div>
      </div>
      <div id="skillButtonContainer" style="margin: 24px 0 0 0; display: flex; gap: 12px;"></div>
      <div style="margin: 24px 0 0 0; display: flex; gap: 12px;">
        <button class="vote-btn" id="voteYesBtn" style="background:#ffe7b2;color:#e26a6a;">‚ù§Ô∏è Love</button>
        <button class="vote-btn" id="voteNoBtn" style="background:#ffe7b2;color:#7a5a2f;">üíî Hate</button>
        <button class="vote-btn" id="voteSubmitBtn" style="background:#b2d7ff;color:#2a4a7a;">Vote</button>
      </div>
    </div>
    <!-- Right Panel: How to Play -->
    <div class="right-panel">
      <div class="score-box" style="min-height: 320px; max-height: 70vh; overflow-y: auto;">
        <div style="font-size:1.13rem;font-weight:bold;margin-bottom:8px;color:#7bb0e6;letter-spacing:1px;">How to Play</div>
        <div style="font-size:1.05rem;">
          <b>Game Overview</b><br>
          ‚Ä¢ 6‚Äì9 players: Cheaters vs. Keepers<br>
          ‚Ä¢ Cheaters: 2‚Äì3 players, Keepers: 4‚Äì6 players<br>
          ‚Ä¢ Each player gets a unique role with special abilities<br>
          ‚Ä¢ Game ends when all Cheaters are caught or when Cheaters win<br>
          <br>
          <b>Game Flow</b><br>
          ‚Ä¢ Each round, players take turns picking Helpers<br>
          ‚Ä¢ Helpers can be Love (positive) or Hate (negative)<br>
          ‚Ä¢ Host and helpers can play Love/Hate cards when allowed<br>
          ‚Ä¢ Special skills can be used at certain times<br>
          ‚Ä¢ Use the UI to track scores and actions<br>
        </div>
      </div>
      <button class="reset-btn host-only" id="restartBtn" style="margin-top:24px;">Restart the Game</button>
      <button id="toggleStageBtn" style="position:absolute;top:32px;right:32px;padding:12px 28px;font-size:1.1em;border-radius:16px;border:2px solid #e2c391;background:#ffe7b2;color:#7a5a2f;font-weight:bold;box-shadow:0 2px 8px 0 #e2c39133;cursor:pointer;z-index:10;">üåô Switch to Day</button>
    </div>
  </div>
  <div id="gameStateBox" style="display:none;"></div>
  <script src="/socket.io/socket.io.js"></script>
  <!-- Inline JS logic will be inserted here -->
</body>
</html>
